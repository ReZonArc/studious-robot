import{j as A,n as M,o as S}from"/build/_shared/chunk-V55N43WY.js";import{a as P}from"/build/_shared/chunk-35S5HMBT.js";import{a as h,c as x,e as N,i as I,j as w,m as b}from"/build/_shared/chunk-24COVZNU.js";import{c as E,e as o}from"/build/_shared/chunk-UED2Q7CE.js";var D=E((R,C)=>{C.exports={}});var O=o(P(),1);var f=o(h(),1);var n=o(h(),1);var e=o(b(),1),K=({messages:l,onSendMessage:r,isProcessing:i=!1,apiKeyConfigured:g=!1,onConfigureApiKey:c})=>{let[d,m]=(0,n.useState)(""),p=(0,n.useRef)(null),y=(0,n.useRef)(null);(0,n.useEffect)(()=>{p.current&&p.current.scrollIntoView({behavior:"smooth"})},[l]),(0,n.useEffect)(()=>{y.current&&y.current.focus()},[]);let v=s=>{s.preventDefault(),d.trim()&&!i&&(r(d),m(""))};return(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("div",{className:"bg-card text-card-foreground px-4 py-3 border-b border-border flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("span",{className:"font-medium",children:"Deep Tree Echo Chat"}),i&&(0,e.jsx)("span",{className:"ml-3 text-xs bg-primary/20 text-primary px-2 py-0.5 rounded animate-pulse",children:"Processing..."})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[!g&&(0,e.jsx)("button",{onClick:c,className:"p-1 rounded-md text-yellow-400 hover:bg-yellow-400/20",title:"API Key not configured",children:(0,e.jsx)(A,{size:18})}),(0,e.jsx)("button",{onClick:c,className:"p-1 rounded-md hover:bg-primary/20",title:"Chat Settings",children:(0,e.jsx)(S,{size:18})})]})]}),(0,e.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map(s=>(0,e.jsx)("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:(0,e.jsxs)("div",{className:`max-w-[80%] rounded-lg p-3 ${s.role==="user"?"bg-primary/20 text-foreground":"bg-card text-card-foreground"}`,children:[(0,e.jsx)("div",{className:"prose prose-sm dark:prose-invert",children:s.content.split(`
`).map((a,u)=>(0,e.jsx)("p",{className:u===0?"mt-0":"",children:a},u))}),(0,e.jsx)("div",{className:"text-xs opacity-70 mt-1",children:new Date(s.timestamp).toLocaleTimeString()})]})},s.id)),l.length===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center max-w-md p-6",children:[(0,e.jsx)("h2",{className:"text-xl font-medium mb-2",children:"Welcome to Deep Tree Echo"}),(0,e.jsx)("p",{className:"opacity-70 mb-4",children:"I'm your AI architect and polymath assistant. Ask me anything about programming, mathematics, cognitive science, or philosophical exploration."}),!g&&(0,e.jsxs)("div",{className:"bg-yellow-500/20 text-yellow-400 p-3 rounded-md text-sm",children:[(0,e.jsx)("p",{children:"For full capabilities, please configure your OpenAI API key in settings. Without an API key, I'll provide simulated responses."}),(0,e.jsx)("button",{onClick:c,className:"mt-2 px-3 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 rounded-md",children:"Configure API Key"})]})]})}),(0,e.jsx)("div",{ref:p})]}),(0,e.jsx)("div",{className:"border-t border-border p-4",children:(0,e.jsxs)("form",{onSubmit:v,className:"flex",children:[(0,e.jsx)("input",{ref:y,type:"text",value:d,onChange:s=>m(s.target.value),placeholder:"Type your message...",className:"flex-1 bg-input border border-border rounded-l-md px-4 py-2 focus:outline-none focus:ring-1 focus:ring-primary",disabled:i}),(0,e.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-r-md disabled:opacity-50",disabled:!d.trim()||i,children:i?(0,e.jsx)("span",{className:"inline-block animate-pulse",children:"..."}):(0,e.jsx)(M,{})})]})})]})},k=K;var T=o(D(),1),t=o(b(),1);function F(){let l=I(),r=w(),i=x(),[g,c]=(0,f.useState)([l.initialMessage]),[d,m]=(0,f.useState)(!1),[p,y]=(0,f.useState)("");(0,f.useEffect)(()=>{r?.userMessage&&c(a=>[...a,r.userMessage]),r?.assistantMessage&&c(a=>[...a,r.assistantMessage])},[r]);let v=a=>{},s=i.state==="submitting";return(0,t.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,t.jsxs)(N,{method:"post",className:"h-full",children:[(0,t.jsx)("input",{type:"hidden",name:"history",value:JSON.stringify(g)}),(0,t.jsx)("input",{type:"hidden",name:"content",id:"message-content"}),(0,t.jsx)(k,{messages:g,onSendMessage:a=>{let u=document.getElementById("message-content");u&&(u.value=a,u.form?.requestSubmit())},isProcessing:s,apiKeyConfigured:l.apiKeyConfigured,onConfigureApiKey:()=>m(!0)})]}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-card rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Configure OpenAI API Key"}),(0,t.jsx)("p",{className:"mb-4 text-sm opacity-80",children:"To use the full capabilities of Deep Tree Echo, please provide your OpenAI API key. Your key is stored securely and only used for generating AI responses."}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"api-key",className:"block text-sm font-medium mb-1",children:"OpenAI API Key"}),(0,t.jsx)("input",{type:"password",id:"api-key",value:p,onChange:a=>y(a.target.value),className:"w-full bg-input border border-border rounded-md px-3 py-2",placeholder:"sk-..."}),(0,t.jsxs)("p",{className:"text-xs mt-1 opacity-70",children:["You can get your API key from the ",(0,t.jsx)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noreferrer",className:"text-primary hover:underline",children:"OpenAI dashboard"}),"."]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border border-border rounded-md",children:"Cancel"}),(0,t.jsx)("button",{type:"button",onClick:()=>{m(!1)},className:"px-4 py-2 bg-primary text-white rounded-md",disabled:!p.trim().startsWith("sk-"),children:"Save API Key"})]})]})})]})}export{F as default};
